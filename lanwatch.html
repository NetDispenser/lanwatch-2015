<html>

<head>
<title>LAN-Watch</title>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" type="text/css" href="/static/xtcpd/css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="/static/xtcpd/css/traffic.css">
<link rel="stylesheet" type="text/css" href="/static/xtcpd/css/lanwatch.css">

<link rel="stylesheet" type="text/css" href="/static/xtcpd/css/ol.css">

<script type="text/javascript" src="/static/xtcpd/js/ol.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/hammer.min.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/d3.v4.min.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/jquery.min.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/util.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/traffic.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/clients.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/spectra.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/zoom.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/map.js"></script>

<script type="text/javascript">
var RUNNING=true;
var TIMEOUT=5000;
window.traffic_widget=null;
window.clients_widget=null;
window.spectra_widget=null;
window.map_widget=null;

window.onresize=function(e){
	console.log("onresize");
	var h_nav=0;//document.getElementById("le_nav").getBoundingClientRect().height;
	//$("#gmap").css("top",h_nav);

	var msg="";

	var AR=(1.0*window.innerWidth)/(1.0*window.innerHeight);
	if(window.innerWidth<=650){
		if(!$("#controls").hasClass("portrait")){
			try{$("#controls").removeClass("landscape");}catch(e){}
			try{$("#controls").removeClass("hhide_medium");}catch(e){}
			try{$("#controls").removeClass("hhide_wide");}catch(e){}
			try{$("#controls").removeClass("hhide_small");}catch(e){}
			try{$("#controls").removeClass("small");}catch(e){}
			try{$("#controls").removeClass("medium");}catch(e){}
			try{$("#controls").removeClass("wide");}catch(e){}
//			document.getElementById("tb_arrow").src="/static/xtcpd/img/arrow-dn.gif";
			$("#controls").addClass("portrait");
		}
	}
	else{
		if(!$("#controls").hasClass("landscape")){
			try{$("#controls").removeClass("portrait");}catch(e){}
			try{$("#controls").removeClass("vhide");}catch(e){}
//			document.getElementById("tb_arrow").src="/static/xtcpd/img/arrow-lt.gif";
			$("#controls").addClass("landscape");
		}
		if(window.innerWidth<=800 && !$("#controls").hasClass("small")){
			try{$("#controls").removeClass("medium");}catch(e){}
			try{$("#controls").removeClass("wide");}catch(e){}
			$("#controls").addClass("small");
		}
		else if(window.innerWidth>800 && window.innerWidth<=1150 && !$("#controls").hasClass("medium")){
			try{$("#controls").removeClass("small");}catch(e){}
			try{$("#controls").removeClass("wide");}catch(e){}
			$("#controls").addClass("medium");
		}
		else if(window.innerWidth>1150 && !$("#controls").hasClass("wide")){
			try{$("#controls").removeClass("small");}catch(e){}
			try{$("#controls").removeClass("medium");}catch(e){}
			$("#controls").addClass("wide");
		}
	}

}
window.counter=0;

var toggleRunCB=function(e){
	if(RUNNING==true){
		RUNNING=false;
		$("#runLED").toggleClass("off");
		$("#runB").toggleClass("off");
	}
	else{
		RUNNING=true;
		$("#runLED").toggleClass("off");
		$("#runB").toggleClass("off");
		update();
	}
}
var setup=function(){
	window.traffic_widget=new TrafficDaemonUI().setup();
	window.spectra_widget=new SpectraDaemonUI();
	window.spectra_widget.setup();
	window.clients_widget=new ClientsDaemonUI().setup();

	d3.selectAll("#theCarousel").style('background-color',mkrandomcolor());
	var bcr=document.getElementById("theCarousel").getBoundingClientRect();
	d3.selectAll(".navbot")
		.style("height",parseInt(bcr.height*0.30))
		.style("width",parseInt(bcr.width*0.2));

	d3.selectAll(".mybutton")
		.style("height",parseInt(bcr.height*0.30))
		.style("width",parseInt(bcr.width*0.2));

	d3.selectAll("#spectra_status")
		.style("height",parseInt(bcr.height*0.10))

	d3.selectAll("#myselectra")
		.style("height",parseInt(bcr.height*0.60))

	d3.selectAll("#clients_status")
		.style("height",parseInt(bcr.height*0.10))

	d3.selectAll("#clients_div")
		.style("height",parseInt(bcr.height*0.60))



	update();

}
var init=function(){
	window.map_widget=new Map('mapdiv');
	window.setTimeout("setup()",3000);

	var hammertime = new Hammer(document.getElementById("layout"));
	hammertime.get('swipe').set({ direction: Hammer.DIRECTION_ALL });
	hammertime.on('swipedown', function(ev) {
		if($("#controls").hasClass("portrait")){$("#controls").toggleClass("vhide");}});
	hammertime.on('swipeup', function(ev) {
		if($("#controls").hasClass("portrait")){$("#controls").toggleClass("vhide");}});

	var carhammer = new Hammer(document.getElementById("theCarousel"));
	carhammer.on('swipeleft', function(ev){
		$("#theCarousel").carousel("next");
		d3.selectAll("#theCarousel").style('background-color',mkrandomcolor());
	});
	carhammer.on('swiperight', function(ev){
		$("#theCarousel").carousel("prev");
		d3.selectAll("#theCarousel").style('background-color',mkrandomcolor());
	});

	window.onresize();

}
</script>
</head>

<body onload="init()" style="background-color:gray;">
<div id="layout" class="container">
	<div class="row">
	<div id="mapdiv" class="mapdiv"></div>

	<div id="theCarousel" class="carousel page-header slide col-lg-12 col-md-12 col-sm-12 col-xs-12" data-ride="carousel" data-interval=false>
	<div class="carousel-inner">

		<div class="item active"><div class="slide1">
			<div id="selectra">
				<table width="100%" height="100%">
				<tr>
					<td colspan="10"><div id="spectra_status"></div></td>
				</tr>
				<tr>
				<td rowspan="2" width="80%">
				<select id="myselectra" multiple="";></select>
				</td>

				<td><input class="mybutton" type="button" value="Up" onclick="spectra_widget.selectCB('up')"></input></td>
				</tr>
				<tr>
				<td><input class="mybutton" type="button" value="Dn" onclick="spectra_widget.selectCB('dn')"></input></td>
				</tr>
				<tr>
					<td colspan="2">
					<table>
					<tr><td>
					<input id="clearB" class="navbot" type="button" value="Clear" onclick="toggleClearCB()"></input>
					</td><td>
					<input id="runB" class="navbot led" type="button" value="Run" onclick="toggleRunCB()"></input>
					</td><td>
					<input id="centerB" class="navbot" type="button" value="Center" onclick="window.map_widget.set_center();"></input>
					</td><td>
					<input id="flyB" class="navbot" type="button" value="FlyIn" onclick="window.map_widget.flyin()"></input>
					</td><td>
					<!--full info button: have it roll-down over map via navbot button.-->
					<input id="fullinfoB" class="navbot" type="button" value="Info" onclick="window.map_widget.full_info();"></input>
					</td>

					</tr>
					</table>
					</td>
				</tr>

				</table>
			</div>
		</div></div>

		<div class="item "><div class="slide2">
			<div id="traffic">
				<div id="svg_background" class="svg_background"></div>
			</div>
		</div></div>

		<div class="item"><div class="slide3">
		SLIDE 4: Data Record & Playback
		<div class="example1">
			<h3>32 NetRanges | 257 IPs | 572 Clients | 449 Messages | Beaverton, OR | Comcast | United States |</h3>
		</div>
		</div></div>

		<div class="item"><div class="slide3">
		SLIDE 5: Daemon Status & Control
		<marquee bgcolor="#000000"><font color="#00FF00">
			32 Clients | 12 Active | Average Load: 87%
		</font></marquee>
		</div></div>

		<div class="item"><div class="slide3">
		SLIDE 6:
		</div></div>


			<div class="item"><div class="slide4">
				<div id="netrange">
					<table width="100%">

						<tr>
							<td colspan="10"><div id="clients_status"></div></td>
						</tr>

						<tr>
						<td rowspan="2" width="80%" style="background-color:teal;">
							<div id="clients_div" style="overflow:auto;">
							<table id="clients_table" width="100%" style="background-color:yellow;"></table>
							</div>
						</td>

						<td><input class="mybutton" type="button" value="Up" onclick="spectra_widget.selectCB('up')"></input></td>
						</tr>
						<tr>
						<td><input class="mybutton" type="button" value="Dn" onclick="spectra_widget.selectCB('dn')"></input></td>
						</tr>
						<tr>
							<td colspan="2">
							<table>
							<tr><td>
							<input id="clearB" class="navbot" type="button" value="Clear" onclick="toggleClearCB()"></input>
							</td><td>
							<input id="runB" class="navbot led" type="button" value="Run" onclick="toggleRunCB()"></input>
							</td><td>
							<input id="centerB" class="navbot" type="button" value="Center" onclick="window.map_widget.set_center();"></input>
							</td><td>
							<input id="flyB" class="navbot" type="button" value="FlyIn" onclick="window.map_widget.flyin()"></input>
							</td><td>
							<!--full info button: have it roll-down over map via navbot button.-->
							<input id="fullinfoB" class="navbot" type="button" value="Info" onclick="window.map_widget.full_info();"></input>
							</td>

							</tr>
							</table>
							</td>
						</tr>


					</table>
				</div>
			</div></div>



	</div><!--carousel-inner-->
	</div><!--theCarousel-->
	</div><!--row-->


	<div id="popup" class="ol-popup">
		<a href="#" id="popup-closer" class="ol-popup-closer"></a>
		<div id="xpopup"></div>
	</div>

</div><!--container-->


</body>
</html>
