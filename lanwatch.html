<html>

<head>
<title>LAN-Watch</title>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link rel="stylesheet" type="text/css" href="/static/xtcpd/css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="/static/xtcpd/css/traffic.css">
<link rel="stylesheet" type="text/css" href="/static/xtcpd/css/lanwatch.css">

<link rel="stylesheet" type="text/css" href="/static/xtcpd/css/ol.css">
<script type="text/javascript" src="/static/xtcpd/js/ol.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/d3.v4.min.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/util.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/traffic.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/clients.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/spectra.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/map.js"></script>

<script type="text/javascript">
var RUNNING=true;
var TIMEOUT=1000;
window.traffic_widget=null;
window.clients_widget=null;
window.spectra_widget=null;

window.onresize=function(e){
	console.log("onresize");
	var h_nav=document.getElementById("le_nav").getBoundingClientRect().height;
	//$("#gmap").css("top",h_nav);

	var msg="";

	var AR=(1.0*window.innerWidth)/(1.0*window.innerHeight);
	if(window.innerWidth<=650){
		if(!$("#controls").hasClass("portrait")){
			try{$("#controls").removeClass("landscape");}catch(e){}
			try{$("#controls").removeClass("hhide_medium");}catch(e){}
			try{$("#controls").removeClass("hhide_wide");}catch(e){}
			try{$("#controls").removeClass("hhide_small");}catch(e){}
			try{$("#controls").removeClass("small");}catch(e){}
			try{$("#controls").removeClass("medium");}catch(e){}
			try{$("#controls").removeClass("wide");}catch(e){}
			document.getElementById("tb_arrow").src="/static/xtcpd/img/arrow-dn.gif";
			$("#controls").addClass("portrait");
		}
	}
	else{
		if(!$("#controls").hasClass("landscape")){
			try{$("#controls").removeClass("portrait");}catch(e){}
			try{$("#controls").removeClass("vhide");}catch(e){}
			document.getElementById("tb_arrow").src="/static/xtcpd/img/arrow-lt.gif";
			$("#controls").addClass("landscape");
		}
		if(window.innerWidth<=800 && !$("#controls").hasClass("small")){
			try{$("#controls").removeClass("medium");}catch(e){}
			try{$("#controls").removeClass("wide");}catch(e){}
			$("#controls").addClass("small");
		}
		else if(window.innerWidth>800 && window.innerWidth<=1150 && !$("#controls").hasClass("medium")){
			try{$("#controls").removeClass("small");}catch(e){}
			try{$("#controls").removeClass("wide");}catch(e){}
			$("#controls").addClass("medium");
		}
		else if(window.innerWidth>1150 && !$("#controls").hasClass("wide")){
			try{$("#controls").removeClass("small");}catch(e){}
			try{$("#controls").removeClass("medium");}catch(e){}
			$("#controls").addClass("wide");
		}
	}

}
window.counter=0;
var toggleRunCB=function(e){
	if(RUNNING==true){
		RUNNING=false;
	}
	else{
		RUNNING=true;
		update();
	}
}
var setup=function(){
	window.traffic_widget=new TrafficDaemonUI().setup();
	window.spectra_widget=new SpectraDaemonUI();
	window.spectra_widget.setup();
	window.clients_widget=new ClientsDaemonUI().setup();
	update();
}
var init=function(){
	var map=new Map('mapdiv');

	window.setTimeout("setup()",3000);

	d3.selectAll("#tb")
		.on("click", function() {

		window.counter+=1;
		console.log("clicked: "+window.counter);

		if($("#controls").hasClass("portrait")){
			$("#controls").toggleClass("vhide");
			//if($("#controls").hasClass("vhide")){
//				var spath=window.Cfg['path'].split(".");
				//document.getElementById("mobile_header").innerHTML=spath[spath.length-1];
			//}
			//else{
			//	document.getElementById("mobile_header").innerHTML=null;
			//}
		}
		else{
			if($("#controls").hasClass("small")){
				$("#controls").toggleClass("hhide_small");
			}
			else if($("#controls").hasClass("medium")){
				$("#controls").toggleClass("hhide_medium");
			}
			else if($("#controls").hasClass("wide")){
				$("#controls").toggleClass("hhide_wide");
			}
		}
//		pan_zoom(window.Cfg['center'],window.Cfg['bbox']);

	});
	window.onresize();
}
</script>
</head>

<body onload="init()">

	<nav id="le_nav" class="navbar navbar-default navbar-fixed-top">
	  <div class="container-fluid">
	    <div class="navbar-header">
	      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false">
	        <span class="sr-only">Toggle navigation</span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	      </button>
	      <a class="navbar-brand" href="/lanwatch/">
	        <img id="logo" alt="Brand" src="/static/xtcpd/img/asymptopia-logo.png">
	      </a>
	    </div>


	    <div class="collapse navbar-collapse" id="navbar-collapse-1">
	      <ul class="nav navbar-nav">

	        <li class="runB"><a onclick="toggleRunCB()"><span class="glyphicon glyphicon-home" aria-hidden="true"></span> Run </a></li>

	        <li class="dropdown">
	          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-deciduous" aria-hidden="true"></span> WiFi <span class="caret"></span></a>
	          <ul class="dropdown-menu">
	            <li class="dropdown-header">WiFi</li>
	            <li><a href="">wlan0</a></li>
							<li><a href="">wlan1</a></li>
	          </ul>
	        </li>

					<li class="dropdown">
	          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-deciduous" aria-hidden="true"></span> Analysis <span class="caret"></span></a>
	          <ul class="dropdown-menu">
	            <li class="dropdown-header">WiFi</li>
	            <li><a href="">wlan0</a></li>
							<li><a href="">wlan1</a></li>
	          </ul>
	        </li>

	      </ul>
	    </div>
	  </div>
	</nav>


<div id="layout" class="container">

	<div class="row">

	<div id="controls" class="controls">

		<div id="mobile_header" class="mobile_header"></div>

		<div id="tb" class="tb">
			<img id="tb_arrow" src="/static/xtcpd/img/arrow-lt.png" class="tb_arrow"/>
		</div>

		<div id="traffic">
			<div id="svg_background" class="svg_background"></div>
		</div>


		<div id="div_controls_top" >
			<!--			<img id='img_controls_top' src="/static/xtcpd/img/green-bar.png" class="img-responsive w100"/> -->
			<div id='title_controls_top'>LAN-Watch</div>
			<img class="controls_logo" src="/static/xtcpd/img/asymptopia-logo.png"/>
		</div>

		<div id="netrange">
			<div id="netrange_background" class="svg_background"></div>
			<span>Spectral Activity</span>
			<span>Connected Devices</span>
		</div>
		<div id="spectra" style="overflow:auto;">
<!--			<div id="spectra_background" class="svg_background"></div> -->
		</div>

		<div id="selectra" style="overflow:auto;">
		<table width="100%">
		<tr><td colspan="2">
		<select id="myselectra" style="width:100%;height:200px;" multiple=""></select>
		</td></tr>
		<tr>
			<td><input type="button" value="Dn" onclick="spectra_widget.selectCB('dn')"></input></td>
			<td><input type="button" value="Up" onclick="spectra_widget.selectCB('up')"></input></td>
		</tr>
		</table>
		</div>

	</div>
	<div id="mapdiv" class="mapdiv"></div>
	</div>
</div>



<script src="/static/xtcpd/js/jquery.min.js"></script>
<script src="/static/xtcpd/js/bootstrap.min.js"></script>

</body>
</html>
