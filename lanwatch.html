<html>

<head>
<title>LAN-Watch</title>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,initial-scale=1">


<link rel="stylesheet" type="text/css" href="/static/xtcpd/css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="/static/xtcpd/css/traffic.css">
<link rel="stylesheet" type="text/css" href="/static/xtcpd/css/lanwatch.css">

<link rel="stylesheet" type="text/css" href="/static/xtcpd/css/ol.css">
<script type="text/javascript" src="/static/xtcpd/js/ol.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/d3.v4.min.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/util.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/traffic.js"></script>
<script type="text/javascript" src="/static/xtcpd/js/map.js"></script>

<script type="text/javascript">
window.onresize=function(e){
	console.log("onresize");
	var h_nav=0;//document.getElementById("le_nav").getBoundingClientRect().height;
	//$("#gmap").css("top",h_nav);

	var msg="";

	var AR=(1.0*window.innerWidth)/(1.0*window.innerHeight);
	if(window.innerWidth<=650){
		if(!$("#controls").hasClass("portrait")){
			try{$("#controls").removeClass("landscape");}catch(e){}
			try{$("#controls").removeClass("hhide_medium");}catch(e){}
			try{$("#controls").removeClass("hhide_wide");}catch(e){}
			try{$("#controls").removeClass("hhide_small");}catch(e){}
			try{$("#controls").removeClass("small");}catch(e){}
			try{$("#controls").removeClass("medium");}catch(e){}
			try{$("#controls").removeClass("wide");}catch(e){}
			document.getElementById("tb_arrow").src="/static/xtcpd/img/arrow-dn.gif";
			$("#controls").addClass("portrait");
		}
	}
	else{
		if(!$("#controls").hasClass("landscape")){
			try{$("#controls").removeClass("portrait");}catch(e){}
			try{$("#controls").removeClass("vhide");}catch(e){}
			document.getElementById("tb_arrow").src="/static/xtcpd/img/arrow-lt.gif";
			$("#controls").addClass("landscape");
		}
		if(window.innerWidth<=800 && !$("#controls").hasClass("small")){
			try{$("#controls").removeClass("medium");}catch(e){}
			try{$("#controls").removeClass("wide");}catch(e){}
			$("#controls").addClass("small");
		}
		else if(window.innerWidth>800 && window.innerWidth<=1150 && !$("#controls").hasClass("medium")){
			try{$("#controls").removeClass("small");}catch(e){}
			try{$("#controls").removeClass("wide");}catch(e){}
			$("#controls").addClass("medium");
		}
		else if(window.innerWidth>1150 && !$("#controls").hasClass("wide")){
			try{$("#controls").removeClass("small");}catch(e){}
			try{$("#controls").removeClass("medium");}catch(e){}
			$("#controls").addClass("wide");
		}
	}

}
window.counter=0;
var setup=function(){
	var traffic_widget=new TrafficDaemonUI().setup();
}
var init=function(){
	var map=new Map('mapdiv');

	window.setTimeout("setup()",3000);

	d3.selectAll("#tb")
		.on("click", function() {

		window.counter+=1;
		console.log("clicked: "+window.counter);

		if($("#controls").hasClass("portrait")){
			$("#controls").toggleClass("vhide");
			//if($("#controls").hasClass("vhide")){
//				var spath=window.Cfg['path'].split(".");
				//document.getElementById("mobile_header").innerHTML=spath[spath.length-1];
			//}
			//else{
			//	document.getElementById("mobile_header").innerHTML=null;
			//}
		}
		else{
			if($("#controls").hasClass("small")){
				$("#controls").toggleClass("hhide_small");
			}
			else if($("#controls").hasClass("medium")){
				$("#controls").toggleClass("hhide_medium");
			}
			else if($("#controls").hasClass("wide")){
				$("#controls").toggleClass("hhide_wide");
			}
		}
//		pan_zoom(window.Cfg['center'],window.Cfg['bbox']);

	});
	window.onresize();
}
</script>
</head>

<body onload="init()">

<div id="layout" class="container">
	<div class="row">

	<div id="controls" class="controls">
		<div id="mobile_header" class="mobile_header"></div>
		<div id="tb" class="tb">
			<img id="tb_arrow" src="/static/xtcpd/img/arrow-lt.png" class="tb_arrow"/>
		</div>
		<div id="traffic">
		<div id="svg_background" class="svg_background" style="height:300px;"></div>
		</div>
		<div id="spectra"></div>
	</div>

	<div id="mapdiv" class="mapdiv"></div>
	</div>
</div>



<script src="/static/xtcpd/js/jquery.min.js"></script>
<script src="/static/xtcpd/js/bootstrap.min.js"></script>

</body>
</html>
